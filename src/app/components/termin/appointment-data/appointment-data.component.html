<div class="appointment-data-wrapper">
  <mat-card (click)="preview ? redirectToAppointment(appointment) : ''" class="appointment-data">
    <div class="bookmark-wrapper">
      <div *ngFor="let ref of appointment.reference" class="bookmark-block">
        <div *ngIf="preview"
             [ngClass]="ref| lowercase"
             class="bookmark">
        </div>
      </div>
    </div>
    <mat-card-title class="headline">
      {{appointment.title}}
    </mat-card-title>
    <mat-card-content>
      <span class="separator colored middle high bolder center"></span>
      <span>
      <mat-icon>location_on</mat-icon>
      <span>{{appointment.location}}</span>
    </span>
      <span>
      <mat-icon>verified_user</mat-icon>
      <span class="hasChild">
        {{appointment.creator.name}}
        <span>@{{appointment.creator.username}}</span>
      </span>
    </span>
      <span>
      <mat-icon>access_time</mat-icon>
      <span> {{(appointment.date | date: 'dd.MM.y')}}<br/>
        {{(appointment.date | date: 'HH:mm')}}Uhr</span>
    </span>
      <span *ngIf="appointment.date != appointment.deadline && appointment.deadline != null">
      <mat-icon>alarm_on</mat-icon>
      <span> {{(appointment.deadline | date: 'dd.MM.y')}}<br/>
        {{(appointment.deadline | date: 'HH:mm')}}Uhr</span>
    </span>
      <p>{{appointment.description}}</p>

      <div *ngIf="!preview && appointment.files.length > 0" class="files-wrapper">
        <span class="separator small light tall center brighter"> </span>
        <div *ngFor="let file of appointment.files" class="file">
          <mat-icon>
            attach_file
          </mat-icon>
          <!--suppress TypeScriptUnresolvedVariable -->
          <a
            [href]="apiUrl + 'file/' + file.id"
            mat-button>
            {{file.name}}
          </a>
        </div>
      </div>
    </mat-card-content>

    <button [matMenuTriggerFor]="menu"
            *ngIf="!preview"
            aria-label="Menu icon for this appointment"
            class="share"
            mat-icon-button>
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button (click)="copyLink()"
              mat-menu-item>
        <mat-icon>share</mat-icon>
        <span>Teilen</span>
      </button>
      <button [disabled]="true" mat-menu-item>
        <ng-container *ngIf="!isPinned">
          <mat-icon>bookmark_border</mat-icon>
          <span>Anpinnen</span>
        </ng-container>
        <ng-container *ngIf="isPinned">
          <mat-icon>bookmark</mat-icon>
          <span>Entfernen</span>
        </ng-container>
      </button>
      <button (click)="settings()"
              mat-menu-item>
        <mat-icon>settings</mat-icon>
        <span>Einstellungen</span>
      </button>
    </mat-menu>
  </mat-card>
</div>

<div class="header">
  <mat-icon class="go_back" (click)="goBack()">last_page</mat-icon>
  <h2 class="headline">{{appointment.title}}</h2>
</div>

<mat-card class="form float">
  <mat-card-title class="headline">
    Anmelden
  </mat-card-title>

  <mat-card-content>
    <form (ngSubmit)="create()" class="register-form" [formGroup]="event">
      <mat-form-field class="name">
        <input matInput
               id="name"
               placeholder="Name"
               formControlName="name"
               required>
        <mat-error *ngIf="event.get('name').invalid">{{ getNameErrorMessage() }}</mat-error>
      </mat-form-field>

      <!--suppress TypeScriptUnresolvedVariable -->
      <div class="additions">
        <div *ngFor="let addition of event.controls.additions.controls; let i = index">
          <mat-checkbox
            formArrayName="additions"
            formControlName="{{i.toString()}}">{{appointment.additions[i].name}}</mat-checkbox>
        </div>
      </div>

      <div class="driverAddition" *ngIf="appointment.driverAddition">
        <div>
          <mat-checkbox
            formControlName="driver">
            Fahrer
          </mat-checkbox>
        </div>
        <mat-form-field *ngIf="!event.get('driver').value">
          <mat-label>Mich bitte mitnehmen</mat-label>
          <mat-select>
            <mat-option [value]="0"> ---</mat-option>
            <mat-option [value]="1"> Nur Hin</mat-option>
            <mat-option [value]="2"> Nur Zurück</mat-option>
            <mat-option [value]="3"> Hin und Zurück</mat-option>
          </mat-select>
        </mat-form-field>

        <ng-container *ngIf="event.get('driver').value">
          <mat-form-field>
            <mat-label>Ich fahre</mat-label>
            <mat-select>
              <mat-option [value]="1"> Nur Hin</mat-option>
              <mat-option [value]="2"> Nur Zurück</mat-option>
              <mat-option [value]="3"> Hin und Zurück</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="seats">
            <input matInput
                   id="seats"
                   placeholder="FREIE Plätze"
                   formControlName="seats"
                   type="number"
                   required>
            <mat-error *ngIf="event.get('seats').invalid">{{ getSeatsErrorMessage() }}</mat-error>
          </mat-form-field>
        </ng-container>
      </div>

      <mat-form-field>
        <textarea matInput placeholder="Kommentar"></textarea>
      </mat-form-field>

      <mat-card-actions>
        <button id="submit" mat-raised-button color="primary">
          Anmelden
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>


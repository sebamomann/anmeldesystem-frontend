<app-appointment-data [appointment]="appointment"></app-appointment-data>

<!--<mat-expansion-panel class="filter">-->
<!--  <mat-expansion-panel-header>-->
<!--    <mat-panel-title>-->
<!--      <mat-icon>filter_list</mat-icon>-->
<!--      Filter-->
<!--    </mat-panel-title>-->
<!--    <mat-panel-description>-->
<!--      Anmeldungen nach Kriterien filtern-->
<!--    </mat-panel-description>-->
<!--  </mat-expansion-panel-header>-->

<!--  <ng-container *ngFor="let addition of appointment.additions">-->
<!--    <div class="filter-element">-->
<!--      <mat-checkbox class="example-margin">{{addition.name}}</mat-checkbox>-->
<!--    </div>-->
<!--  </ng-container>-->
<!--</mat-expansion-panel>-->

<div class="enrollment-list block decent"
     *ngIf="enrollments.length > 0 || getNumberOfActiveFilter() > 0; else emptyList">

  <mat-icon (click)="openFilterDialog()"
            matBadge="{{getNumberOfActiveFilter() > 0 ? getNumberOfActiveFilter() : ''}}"
            matBadgeColor="info"
            class="filter-open"
            matBadgeSize="small">
    filter_list
  </mat-icon>

  <mat-accordion *ngIf="enrollments.length > 0; else emptyListFilter">
    <ng-container *ngFor="let enrollment of enrollments">
      <mat-expansion-panel class="enrollment">
        <mat-expansion-panel-header class="enrollment-info" [collapsedHeight]="'auto'" [expandedHeight]="'auto'">
          <span>{{enrollment.name}}</span>
          <span class="seperator small colored bolder high"></span>
          <span class="comment">{{ enrollment.comment.length > 0 ? enrollment.comment : "---" }}</span>
          <div class="addition-list" *ngIf="appointment.additions.length > 0">
            <ng-container *ngIf="appointment.additions.length > 0 && enrollment.comment.length > 0">
              <span class="seperator small high"></span>
            </ng-container>
            <ng-container *ngFor="let addition of appointment.additions">
              <div>
                <mat-icon *ngIf="enrollment.additions.indexOf(addition.id) !== -1">
                  check_box
                </mat-icon>
                <mat-icon *ngIf="enrollment.additions.indexOf(addition.id) === -1">
                  check_box_outline_blank
                </mat-icon>
                <span>{{addition.name}}</span>
              </div>
            </ng-container>
          </div>
        </mat-expansion-panel-header>

        <div class="enrollment-additions">
          <mat-icon matBadge="{{enrollment.comments.length > 0 ? enrollment.comments.length : ''}}"
                    matBadgeColor="info">
            comment
          </mat-icon>
          <ng-container *ngIf="allowModify">
            <mat-icon>edit</mat-icon>
            <mat-icon>delete</mat-icon>
          </ng-container>
        </div>
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>

  <ng-template #emptyListFilter>
    <div class="empty-list">
      <mat-icon>search</mat-icon>
      <span>
        Dieser Filter liefert keine Ergebnisse
      </span>
    </div>
  </ng-template>
</div>


<ng-template #emptyList>
  <div class="empty-list float">
    <span>
        Es hat sich noch niemand angemeldet.
      </span>
  </div>
</ng-template>

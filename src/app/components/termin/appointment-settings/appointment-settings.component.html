<mat-card class="float high">
  <ng-container *ngIf="appointment != undefined; else loading">
    <mat-card-title class="headline">
      {{appointment.title}}
    </mat-card-title>
    <mat-tab-group [selectedIndex]="0" dynamicHeight>
      <mat-tab label="Allgemein">
        <app-overall-data
          (save)="saveOverall($event)"
          [appointment]="appointment">
        </app-overall-data>
      </mat-tab>
      <mat-tab label="Zusätze">
        <app-additions
          (save)="saveAdditions($event)"
          [appointment]="appointment">
        </app-additions>
      </mat-tab>
      <mat-tab label="Link">
        <app-link-data
          (save)="saveLink($event)"
          [appointment]="appointment"></app-link-data>
        <ng-container *ngTemplateOutlet="link"></ng-container>
      </mat-tab>
      <mat-tab label="Adminsitration">
        <ng-container *ngTemplateOutlet="administration"></ng-container>
      </mat-tab>
      <mat-tab label="Anhänge">
        <ng-container *ngTemplateOutlet="fileUpload"></ng-container>
      </mat-tab>
    </mat-tab-group>
  </ng-container>
</mat-card>

<ng-template #loading>
  <mat-spinner>
  </mat-spinner>
</ng-template>

<ng-template #administration>
  <form [formGroup]="administratorFormGroup">
    <span class="info">Erlaube jemandem die Administration dieses Termins</span>
    <div class="input-with-button-wrapper">
      <mat-form-field>
        <input aria-label="Number"
               formControlName="name"
               matInput
               placeholder="Benutzername"
               type="text">
      </mat-form-field>
      <button mat-raised-button>Speichern</button>
    </div>

    <ng-container *ngIf="administrators.length > 0">
      <span class="separator center colored middle extra-tall"></span>
      <div class="administrator-wrapper">
        <app-administrator-delete
          *ngFor="let admin of administrators"
          [admin]="admin"
          [appointment]="appointment">

        </app-administrator-delete>
      </div>
    </ng-container>
  </form>
</ng-template>

<ng-template #fileUpload>
  <span class="info">
    Datei zum Download
  </span>
  <button (click)="selectFilesFromComputer()"
          class="file-upload"
          mat-raised-button>
    <mat-icon>
      file_upload
    </mat-icon>
    Hochladen
  </button>
  <input id="fileUpload"
         multiple="multiple"
         name="fileUpload"
         style="display:none;"
         type="file"/>

  <ng-container *ngIf="files.length > 0">
    <span class="separator center colored middle extra-tall"></span>
    <div class="file-wrapper">
      <app-file-delete
        *ngFor="let file of files"
        [appointment]="appointment"
        [file]="file">
      </app-file-delete>
    </div>
  </ng-container>
</ng-template>
